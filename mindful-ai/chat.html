<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat - MindfulAI</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vue.js -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
        }
        .chat-container {
            height: calc(100vh - 8rem);
        }
        .message-list {
            height: calc(100% - 4rem);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen">
        <!-- Sidebar -->
        <nav class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg transform transition-transform duration-200 ease-in-out md:translate-x-0" 
             :class="{'translate-x-0': sidebarOpen, '-translate-x-full': !sidebarOpen && !$screen.md}">
            <div class="p-6">
                <div class="flex items-center justify-between mb-8">
                    <h1 class="text-2xl font-bold text-indigo-600">MindfulAI</h1>
                    <button @click="toggleSidebar" class="md:hidden text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-4">
                    <a href="index.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-100">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                    <a href="chat.html" class="block py-2.5 px-4 rounded transition duration-200 bg-indigo-50 text-indigo-600">
                        <i class="fas fa-comments mr-2"></i>Chat
                    </a>
                    <a href="analytics.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-100">
                        <i class="fas fa-chart-line mr-2"></i>Analytics
                    </a>
                    <a href="treatment.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-100">
                        <i class="fas fa-clipboard-list mr-2"></i>Treatment
                    </a>
                    <a href="resources.html" class="block py-2.5 px-4 rounded transition duration-200 hover:bg-gray-100">
                        <i class="fas fa-book-medical mr-2"></i>Resources
                    </a>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="md:ml-64">
            <!-- Mobile Header -->
            <header class="md:hidden bg-white shadow-sm p-4">
                <button @click="toggleSidebar" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-bars"></i>
                </button>
            </header>

            <!-- Chat Interface -->
            <div class="chat-container p-6">
                <div class="bg-white rounded-lg shadow-lg h-full flex flex-col">
                    <!-- Chat Header -->
                    <div class="p-4 border-b">
                        <h2 class="text-xl font-semibold">Chat with MindfulAI</h2>
                        <p class="text-gray-600 text-sm">Your conversations are private and secure</p>
                    </div>

                    <!-- Messages List -->
                    <div class="message-list flex-1 overflow-y-auto p-4 space-y-4">
                        <!-- Welcome Message -->
                        <div class="flex items-start mb-4">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center">
                                <i class="fas fa-robot text-indigo-600"></i>
                            </div>
                            <div class="ml-3 bg-gray-100 rounded-lg py-2 px-4 max-w-[80%]">
                                <p class="text-gray-800">
                                    Hello! I'm your AI companion. How are you feeling today? 
                                    I'm here to listen and provide support.
                                </p>
                            </div>
                        </div>

                        <!-- Dynamic Messages -->
                        <div v-for="message in messages" :key="message.id" class="flex items-start mb-4"
                             :class="{'justify-end': message.type === 'user'}">
                            <!-- AI Message -->
                            <template v-if="message.type === 'ai'">
                                <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center">
                                    <i class="fas fa-robot text-indigo-600"></i>
                                </div>
                                <div class="ml-3 bg-gray-100 rounded-lg py-2 px-4 max-w-[80%]">
                                    <p class="text-gray-800">{{ message.content }}</p>
                                </div>
                            </template>

                            <!-- User Message -->
                            <template v-if="message.type === 'user'">
                                <div class="mr-3 bg-indigo-600 rounded-lg py-2 px-4 max-w-[80%]">
                                    <p class="text-white">{{ message.content }}</p>
                                </div>
                                <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-600 flex items-center justify-center">
                                    <i class="fas fa-user text-white"></i>
                                </div>
                            </template>
                        </div>

                        <!-- Typing Indicator -->
                        <div v-if="isTyping" class="flex items-start">
                            <div class="flex-shrink-0 w-8 h-8 rounded-full bg-indigo-100 flex items-center justify-center">
                                <i class="fas fa-robot text-indigo-600"></i>
                            </div>
                            <div class="ml-3 bg-gray-100 rounded-lg py-2 px-4">
                                <div class="flex space-x-2">
                                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div>
                                    <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Input Area -->
                    <div class="p-4 border-t">
                        <form @submit.prevent="sendMessage" class="flex space-x-4">
                            <input 
                                type="text" 
                                v-model="newMessage" 
                                placeholder="Type your message..." 
                                class="flex-1 px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                :disabled="isTyping"
                            >
                            <button 
                                type="submit" 
                                class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50"
                                :disabled="isTyping || !newMessage.trim()"
                            >
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main JavaScript -->
    <script>
        const { createApp } = Vue

        createApp({
            data() {
                return {
                    sidebarOpen: false,
                    messages: [],
                    newMessage: '',
                    isTyping: false
                }
            },
            methods: {
                toggleSidebar() {
                    this.sidebarOpen = !this.sidebarOpen
                },
                async sendMessage() {
                    if (!this.newMessage.trim()) return

                    // Add user message
                    this.messages.push({
                        id: Date.now(),
                        type: 'user',
                        content: this.newMessage
                    })

                    // Clear input
                    const userMessage = this.newMessage
                    this.newMessage = ''

                    // Show typing indicator
                    this.isTyping = true

                    // Simulate AI response (replace with actual API call)
                    setTimeout(() => {
                        this.isTyping = false
                        this.messages.push({
                            id: Date.now(),
                            type: 'ai',
                            content: this.generateResponse(userMessage)
                        })

                        // Scroll to bottom
                        this.$nextTick(() => {
                            const messageList = document.querySelector('.message-list')
                            messageList.scrollTop = messageList.scrollHeight
                        })
                    }, 1500)
                },
                generateResponse(userMessage) {
                    // Simple response generation (replace with actual AI logic)
                    const responses = [
                        "I understand how you're feeling. Would you like to tell me more about that?",
                        "That sounds challenging. How long have you been experiencing this?",
                        "I'm here to support you. What would be most helpful right now?",
                        "Your feelings are valid. Let's explore this together.",
                        "Thank you for sharing that with me. How does this situation affect your daily life?"
                    ]
                    return responses[Math.floor(Math.random() * responses.length)]
                }
            },
            mounted() {
                // Scroll to bottom on mount
                this.$nextTick(() => {
                    const messageList = document.querySelector('.message-list')
                    messageList.scrollTop = messageList.scrollHeight
                })
            }
        }).mount('#app')
    </script>
</body>
</html>
